<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="2.2 Lighting an LED with Arduino | CHEM 191: A Teensy Introduction to Atmospheric Chemistry" />
<meta property="og:type" content="book" />


<meta property="og:description" content="Course Materials for CHEM 191: Issues in Environmental Chemistry" />


<meta name="author" content="Dr. Al Fischer" />

<meta name="date" content="2019-05-16" />


<meta name="description" content="Course Materials for CHEM 191: Issues in Environmental Chemistry">

<title>2.2 Lighting an LED with Arduino | CHEM 191: A Teensy Introduction to Atmospheric Chemistry</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="preface.html#preface">Preface</a></li>
<li class="part"><span><b>I Theory</b></span></li>
<li><a href="1-getting-started.html#getting-started"><span class="toc-section-number">1</span> Getting Started</a></li>
<li class="part"><span><b>II Measuring</b></span></li>
<li class="has-sub"><a href="2-gettingstarted.html#gettingstarted"><span class="toc-section-number">2</span> Getting Started with Teensy &amp; Arduino</a><ul>
<li><a href="2-1-introduction-what-is-arduino.html#introduction-what-is-arduino"><span class="toc-section-number">2.1</span> Introduction: What is Arduino?</a></li>
<li class="has-sub"><a href="2-2-lighting-an-led-with-arduino.html#lighting-an-led-with-arduino"><span class="toc-section-number">2.2</span> Lighting an LED with Arduino</a><ul>
<li><a href="2-2-lighting-an-led-with-arduino.html#connecting-the-leds"><span class="toc-section-number">2.2.1</span> Connecting the LEDs</a></li>
<li><a href="2-2-lighting-an-led-with-arduino.html#programming-the-arduino"><span class="toc-section-number">2.2.2</span> Programming the Arduino</a></li>
</ul></li>
<li><a href="2-3-additional-resources.html#additional-resources"><span class="toc-section-number">2.3</span> Additional Resources</a></li>
</ul></li>
<li><a href="3-literature.html#literature"><span class="toc-section-number">3</span> Literature</a></li>
<li><a href="4-methods.html#methods"><span class="toc-section-number">4</span> Methods</a></li>
<li class="has-sub"><a href="5-applications.html#applications"><span class="toc-section-number">5</span> Applications</a><ul>
<li><a href="5-1-example-one.html#example-one"><span class="toc-section-number">5.1</span> Example one</a></li>
<li><a href="5-2-example-two.html#example-two"><span class="toc-section-number">5.2</span> Example two</a></li>
</ul></li>
<li><a href="6-final-words.html#final-words"><span class="toc-section-number">6</span> Final Words</a></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="lighting-an-led-with-arduino" class="section level2">
<h2><span class="header-section-number">2.2</span> Lighting an LED with Arduino</h2>
<p>Our goal is to turn an LED on and off using an Arduino microcontroller. You’ll have to connect the LED to the microcontroller and write appropriate code to control it. The blink example in the Arduino IDE under <code>File &gt; Examples &gt; Basics &gt; Blink</code> may be helpful in getting started, but will need some editing to work properly with our LEDs.</p>
<div id="connecting-the-leds" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Connecting the LEDs</h3>
<p>The LEDs we have are RGB (red, green, blue) LEDs, and each color has a different terminal that’s used to turn it on and off independently. The LEDs are <em>common cathode</em>, meaning all the colors share a negative terminal and have their own positive terminals. To turn the individual colors on and off, simply turn on the corresponding positive terminal (i.e. set it <em>high</em>). The manufacturere provides a <em>pinout</em> of the LED that shows which pin turns on each color, is reprinted below in Figure 2.</p>
<!-- ![pinout](images/pinout.jpg) -->
<!-- <small> **Figure 2:** Dimensional drawing of the LED showing numbered pins (left) and schematic representation of the same LED (right). Reprinted from [the vendor's website](www.taydaelectronics.com/datasheets/A-1094.pdf).</small> -->
<p>To connect the LED:</p>
<ol style="list-style-type: decimal">
<li>Connect the <em>cathode</em> (long terminal) to ground on the Arduino.</li>
<li>Connect the other legs to digital pins on the Arduino, for example pins 11, 12, and 13.</li>
</ol>
<p>The final setup should look something like Figure 3:</p>
<!-- <center><img src="images/LED_bb.jpg" alt="Drawing" style="height: 275px;"/>     <img src="images/LED_schem.jpg" alt="Drawing" style="height: 275px;"/></center> -->
<!-- <small> **Figure 3:** Visual representation of the LED-Arduino setup (left) and schematic representation of the same setup (right). </small> -->
</div>
<div id="programming-the-arduino" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Programming the Arduino</h3>
<ol style="list-style-type: decimal">
<li>Open the Arduino IDE and find the “Blink” example:</li>
</ol>
<pre><code>File &gt; Examples &gt; Basics &gt; Blink</code></pre>
<p>The example code has all the features necessary for an Arduino program, and we’ll go through it step-by-step. The grey text at the top surrounded by <code>/*</code> or <code>//</code> dileneates informative comments about the code. Just below that, the variables and constants (things to assign values to) are defined. Here, the constant <code>led</code> has been assigned an integer (<code>int</code>) value of 13 to represent the LED attached to pin 13.</p>
<ol style="list-style-type: decimal">
<li>At this point, assign variables for each color of the LED:</li>
</ol>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">int</span> red   = <span class="dv">13</span>
<span class="dt">int</span> blue  = <span class="dv">12</span>
<span class="dt">int</span> green = <span class="dv">11</span></code></pre>
<p>Just below the variable definitions is the <code>setup()</code> command, which is required for every Arduino program. The <code>setup()</code> command only runs once when the program initializes, so anything containted within the curly braces happens only a single time. In Arduino (actually C) commands are always followed by <code>()</code> and are automatically colored orange by the Arduino IDE.</p>
<ol style="list-style-type: decimal">
<li>For this program, we need to configure the LED pins to <em>output</em> (as opposed to input) a signal:</li>
</ol>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> setup() {
    pinMode(red, OUTPUT);   <span class="co">// set pin 13 (red) to OUTPUT</span>
    pinMode(blue, OUTPUT);  <span class="co">// comments aren&#39;t read by Arduino</span>
    pinMode(green, OUTPUT); <span class="co">// so type whatever you want</span>
}</code></pre>
<blockquote>
<p><em>Note that spaces and characters preceded by <code>//</code> aren’t important for running the program, just for making it more legible to humans. Use these comments to explain what your code is doing. However, be sure to include all capital letters, brackets and semi-colons because they <strong>are</strong> important.</em></p>
</blockquote>
<p>Next is the <code>loop()</code> command, which is also required by every Arduino program. Anything in the in the <code>loop()</code> command is repeated as long as the program runs (i.e. anytime the Arduino is plugged in). Any repetitive task, like turing the LED on and off, should go here.</p>
<ol style="list-style-type: decimal">
<li>Modify the existing code to turn on and off your favorite color:</li>
</ol>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> loop() {
    digitalWrite(blue, HIGH); <span class="co">// turn color on by applying 5V</span>
    delay(<span class="dv">1000</span>);              <span class="co">// wait 1000 milliseconds</span>
    digitalWrite(blue, LOW);  <span class="co">// turn color off (set to 0V)</span>
    delay(<span class="dv">1000</span>);              <span class="co">// wait again before repeating</span>
}</code></pre>
<blockquote>
<p><em>Every Arduino program must have <code>setup()</code> and <code>loop()</code> commands (even if they are empty). <code>setup()</code> tells the microcontroller what to do once when it starts; <code>loop()</code> tells it what repetitive task to do.</em></p>
</blockquote>
<ol style="list-style-type: decimal">
<li>That’s it! Check your code by pressing the round “verify” check mark in the upper left corner of the IDE.</li>
<li>If you don’t get any errors, you’re ready to upload your code:
<ol style="list-style-type: decimal">
<li>Make sure you have selected the correct board type:</li>
</ol>
<pre class="sourceCode cpp"><code class="sourceCode cpp">Tools &gt; Board &gt; Arduino Uno</code></pre>
<p>and the correct serial port:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">Tools &gt; Port &gt; COM X*</code></pre>
<p>*You may have to try multiple COM ports to find the right one.</p>
<ol start="2" style="list-style-type: decimal">
<li>Press the round “upload” arrow next to the verify button.
Once your code is uploaded, you should see the color you chose flashing on the Arduino. If it’s not, go back a few steps and try and figure out why.</li>
<li>If your code works, try changing it around to do new things. You can change the amount of time the LED stays on (the duty cycle) or change which colors are turned on.</li>
</ol></li>
</ol>
</div>
</div>
<p style="text-align: center;">
<a href="2-1-introduction-what-is-arduino.html"><button class="btn btn-default">Previous</button></a>
<a href="2-3-additional-resources.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
