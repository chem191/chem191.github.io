<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Exercise 3 Voltage and Communication | CHEM 191 Workbook: Building a Teensy Air Quality Monitor</title>
  <meta name="description" content="Course Materials for CHEM 191: Issues in Environmental Chemistry" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Exercise 3 Voltage and Communication | CHEM 191 Workbook: Building a Teensy Air Quality Monitor" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Course Materials for CHEM 191: Issues in Environmental Chemistry" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Exercise 3 Voltage and Communication | CHEM 191 Workbook: Building a Teensy Air Quality Monitor" />
  
  <meta name="twitter:description" content="Course Materials for CHEM 191: Issues in Environmental Chemistry" />
  

<meta name="author" content="Al Fischer" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="blink-an-led.html">
<link rel="next" href="functions-building-blocks-for-programs.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://alphonse.github.io/chem191">CHEM 191 Main Page</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#what-is-arduino"><i class="fa fa-check"></i>What is Arduino?</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#ok-but-what-is-teensy"><i class="fa fa-check"></i>OK, but what is Teensy?</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#using-this-book"><i class="fa fa-check"></i>Using this Book</a><ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#code"><i class="fa fa-check"></i>Code</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#notes-and-warnings"><i class="fa fa-check"></i>Notes and Warnings</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#is-this-work-dangerous"><i class="fa fa-check"></i>Is this work dangerous?</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#additional-resources"><i class="fa fa-check"></i>Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started-with-arduino.html"><a href="getting-started-with-arduino.html"><i class="fa fa-check"></i><b>1</b> Getting Started with Arduino</a><ul>
<li class="chapter" data-level="" data-path="getting-started-with-arduino.html"><a href="getting-started-with-arduino.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1.1" data-path="getting-started-with-arduino.html"><a href="getting-started-with-arduino.html#install-the-arduino-ide"><i class="fa fa-check"></i><b>1.1</b> Install the Arduino IDE</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started-with-arduino.html"><a href="getting-started-with-arduino.html#install-teensyduino"><i class="fa fa-check"></i><b>1.2</b> Install Teensyduino</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started-with-arduino.html"><a href="getting-started-with-arduino.html#test-the-teensy"><i class="fa fa-check"></i><b>1.3</b> Test the Teensy!</a><ul>
<li class="chapter" data-level="1.3.1" data-path="getting-started-with-arduino.html"><a href="getting-started-with-arduino.html#check-the-board"><i class="fa fa-check"></i><b>1.3.1</b> Check the board</a></li>
<li class="chapter" data-level="1.3.2" data-path="getting-started-with-arduino.html"><a href="getting-started-with-arduino.html#check-the-software"><i class="fa fa-check"></i><b>1.3.2</b> Check the software</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="blink-an-led.html"><a href="blink-an-led.html"><i class="fa fa-check"></i><b>2</b> Blink an LED</a><ul>
<li class="chapter" data-level="" data-path="blink-an-led.html"><a href="blink-an-led.html#introduction-1"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="blink-an-led.html"><a href="blink-an-led.html#how-are-things-connected-to-a-teensy"><i class="fa fa-check"></i>How are things connected to a Teensy?</a></li>
<li class="chapter" data-level="" data-path="blink-an-led.html"><a href="blink-an-led.html#the-solderless-breadboard"><i class="fa fa-check"></i>The solderless breadboard</a></li>
<li class="chapter" data-level="" data-path="blink-an-led.html"><a href="blink-an-led.html#what-is-a-program"><i class="fa fa-check"></i>What is a program?</a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="blink-an-led.html"><a href="blink-an-led.html#connecting-the-led"><i class="fa fa-check"></i><b>2.1</b> Connecting the LED</a></li>
<li class="chapter" data-level="2.2" data-path="blink-an-led.html"><a href="blink-an-led.html#program-the-teensy"><i class="fa fa-check"></i><b>2.2</b> Program the Teensy</a><ul>
<li class="chapter" data-level="2.2.1" data-path="blink-an-led.html"><a href="blink-an-led.html#one-color"><i class="fa fa-check"></i><b>2.2.1</b> One Color</a></li>
<li class="chapter" data-level="2.2.2" data-path="blink-an-led.html"><a href="blink-an-led.html#three-colors"><i class="fa fa-check"></i><b>2.2.2</b> Three Colors</a></li>
<li class="chapter" data-level="2.2.3" data-path="blink-an-led.html"><a href="blink-an-led.html#make-your-own-changes"><i class="fa fa-check"></i><b>2.2.3</b> Make Your Own Changes</a></li>
<li class="chapter" data-level="2.2.4" data-path="blink-an-led.html"><a href="blink-an-led.html#turn-in"><i class="fa fa-check"></i><b>2.2.4</b> Turn in</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html"><i class="fa fa-check"></i><b>3</b> Voltage and Communication</a><ul>
<li class="chapter" data-level="" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#introduction-2"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#electricity"><i class="fa fa-check"></i>Electricity</a></li>
<li class="chapter" data-level="" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#bits-and-volts"><i class="fa fa-check"></i>Bits and Volts</a></li>
<li class="chapter" data-level="" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#communicating-via-the-serial-port"><i class="fa fa-check"></i>Communicating via the serial port</a></li>
</ul></li>
<li class="chapter" data-level="3.1" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#connect-the-temperature-sensor"><i class="fa fa-check"></i><b>3.1</b> Connect the Temperature Sensor</a></li>
<li class="chapter" data-level="3.2" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#program-the-teensy-1"><i class="fa fa-check"></i><b>3.2</b> Program the Teensy</a><ul>
<li class="chapter" data-level="3.2.1" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#bare-minimum"><i class="fa fa-check"></i><b>3.2.1</b> Bare Minimum</a></li>
<li class="chapter" data-level="3.2.2" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#converting-to-temperature"><i class="fa fa-check"></i><b>3.2.2</b> Converting to Temperature</a></li>
<li class="chapter" data-level="3.2.3" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#cleaning-up-the-output"><i class="fa fa-check"></i><b>3.2.3</b> Cleaning up the Output</a></li>
<li class="chapter" data-level="3.2.4" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#make-your-own-changes-1"><i class="fa fa-check"></i><b>3.2.4</b> Make Your Own Changes</a></li>
<li class="chapter" data-level="3.2.5" data-path="voltage-and-communication.html"><a href="voltage-and-communication.html#turn-in-1"><i class="fa fa-check"></i><b>3.2.5</b> Turn in</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions-building-blocks-for-programs.html"><a href="functions-building-blocks-for-programs.html"><i class="fa fa-check"></i><b>4</b> Functions: Building Blocks for Programs</a><ul>
<li class="chapter" data-level="" data-path="functions-building-blocks-for-programs.html"><a href="functions-building-blocks-for-programs.html#introduction-3"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="4.0.1" data-path="functions-building-blocks-for-programs.html"><a href="functions-building-blocks-for-programs.html#using-functions"><i class="fa fa-check"></i><b>4.0.1</b> Using Functions</a></li>
</ul></li>
<li class="chapter" data-level="4.1" data-path="functions-building-blocks-for-programs.html"><a href="functions-building-blocks-for-programs.html#writing-a-blink-function"><i class="fa fa-check"></i><b>4.1</b> Writing a <code>blink()</code> Function</a></li>
<li class="chapter" data-level="4.2" data-path="functions-building-blocks-for-programs.html"><a href="functions-building-blocks-for-programs.html#using-functions-1"><i class="fa fa-check"></i><b>4.2</b> Using Functions</a></li>
<li class="chapter" data-level="4.3" data-path="functions-building-blocks-for-programs.html"><a href="functions-building-blocks-for-programs.html#write-functions-with-multiple-arguments"><i class="fa fa-check"></i><b>4.3</b> Write Functions With Multiple Arguments</a></li>
<li class="chapter" data-level="4.4" data-path="functions-building-blocks-for-programs.html"><a href="functions-building-blocks-for-programs.html#turn-in-2"><i class="fa fa-check"></i><b>4.4</b> Turn In</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="soldering-and-pcb-assembly.html"><a href="soldering-and-pcb-assembly.html"><i class="fa fa-check"></i><b>5</b> Soldering and PCB Assembly</a><ul>
<li class="chapter" data-level="5.1" data-path="soldering-and-pcb-assembly.html"><a href="soldering-and-pcb-assembly.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="soldering-and-pcb-assembly.html"><a href="soldering-and-pcb-assembly.html#soldering-basics"><i class="fa fa-check"></i><b>5.2</b> Soldering Basics</a><ul>
<li class="chapter" data-level="5.2.1" data-path="soldering-and-pcb-assembly.html"><a href="soldering-and-pcb-assembly.html#the-supplies"><i class="fa fa-check"></i><b>5.2.1</b> The Supplies</a></li>
<li class="chapter" data-level="5.2.2" data-path="soldering-and-pcb-assembly.html"><a href="soldering-and-pcb-assembly.html#the-technique"><i class="fa fa-check"></i><b>5.2.2</b> The Technique</a></li>
<li class="chapter" data-level="5.2.3" data-path="soldering-and-pcb-assembly.html"><a href="soldering-and-pcb-assembly.html#safety"><i class="fa fa-check"></i><b>5.2.3</b> Safety</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="soldering-and-pcb-assembly.html"><a href="soldering-and-pcb-assembly.html#assembling-the-board"><i class="fa fa-check"></i><b>5.3</b> Assembling the Board</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html"><i class="fa fa-check"></i>Appendix A: Function Library</a><ul>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#blink"><i class="fa fa-check"></i>blink()</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#checkconnection"><i class="fa fa-check"></i>checkConnection()</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#createfilenameint-y-int-m-int-d"><i class="fa fa-check"></i>createFileName(int y, int m, int d)</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#filldigitsint-digits"><i class="fa fa-check"></i>fillDigits(int digits)</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#getteensy3time"><i class="fa fa-check"></i>getTeensy3Time()</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#performpmreading"><i class="fa fa-check"></i>performPMReading()</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#printdata"><i class="fa fa-check"></i>printData()</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#printdateint-y-int-m-int-d"><i class="fa fa-check"></i>printDate(int y, int m, int d)</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#printdatetimestring-d-string-t"><i class="fa fa-check"></i>printDateTime(String d, String t)</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#printtimeint-h-int-m-int-s"><i class="fa fa-check"></i>printTime(int h, int m, int s)</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#setbmesamplingparameters"><i class="fa fa-check"></i>setBMESamplingParameters()</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#turnsensorsoff"><i class="fa fa-check"></i>turnSensorsOff()</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#turnsensorson"><i class="fa fa-check"></i>turnSensorsOn()</a></li>
<li class="chapter" data-level="" data-path="appendix-a-function-library.html"><a href="appendix-a-function-library.html#writefilechar-filename16"><i class="fa fa-check"></i>writeFile(char filename[16])</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-b-strategies-for-troubleshooting.html"><a href="appendix-b-strategies-for-troubleshooting.html"><i class="fa fa-check"></i>Appendix B: Strategies for Troubleshooting</a></li>
<li class="chapter" data-level="" data-path="appendix-c-glossary-and-abbreviations.html"><a href="appendix-c-glossary-and-abbreviations.html"><i class="fa fa-check"></i>Appendix C: Glossary and Abbreviations</a><ul>
<li><a href="appendix-c-glossary-and-abbreviations.html#current-i">Current (<em>i</em>)</a></li>
<li class="chapter" data-level="" data-path="appendix-c-glossary-and-abbreviations.html"><a href="appendix-c-glossary-and-abbreviations.html#electricity-1"><i class="fa fa-check"></i>Electricity</a></li>
<li class="chapter" data-level="" data-path="appendix-c-glossary-and-abbreviations.html"><a href="appendix-c-glossary-and-abbreviations.html#led"><i class="fa fa-check"></i>LED</a></li>
<li><a href="appendix-c-glossary-and-abbreviations.html#power-p">Power (<em>P</em>)</a></li>
<li><a href="appendix-c-glossary-and-abbreviations.html#resistance-r">Resistance (<em>R</em>)</a></li>
<li><a href="appendix-c-glossary-and-abbreviations.html#voltage-v">Voltage (<em>V</em>)</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CHEM 191 Workbook: Building a Teensy Air Quality Monitor</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="voltage-and-communication" class="section level1">
<h1><span class="header-section-number">Exercise 3</span> Voltage and Communication</h1>
<p><strong>Objective:</strong> Measure a temperature with Teensy and display the result to the computer screen using serial communication.<br />
<strong>To turn in:</strong></p>
<div id="introduction-2" class="section level2 unnumbered">
<h2>Introduction</h2>
<p>In the last exercise you used a Teensy to turn a light on and off, although we did not discuss what was happening electrically. This exercise will explore the electrical workings of the Teensy and walk you through how to write code to <em>sense</em> signals from a device. More specifically, you’ll investigate (1) the concept of <strong>voltage</strong> while sensing temperature and (2) communicating .</p>
<div id="electricity" class="section level3 unnumbered">
<h3>Electricity</h3>
<p>When first learning about electricity, it may help to think of it in analogous terms to water. <strong>Current</strong> is the flow of electricity through a circuit, and is analogous to the current in a river. Just like water molecules move through the river, charge carriers (electrons) in a move through the wires of the circuit. <strong>Voltage</strong> is a <em>potential energy difference</em> between two points in a circuit. This is analogous to the potential energy difference in water stored behind a dam and water at the bottom of the dam. Current will not flow without a voltage difference, just as water will not flow without a difference in height or pressure.</p>
<p>Recall that in the last exercise you turned an LED on and off using a pin on the Teensy. You did this by alternately setting the pin to <code>HIGH</code> and <code>LOW</code>, as in:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb11-1"><a href="voltage-and-communication.html#cb11-1"></a>    digitalWrite(<span class="dv">13</span>, HIGH);</span>
<span id="cb11-2"><a href="voltage-and-communication.html#cb11-2"></a>    delay(<span class="dv">1000</span>);</span>
<span id="cb11-3"><a href="voltage-and-communication.html#cb11-3"></a>    digitalWrite(<span class="dv">13</span>, LOW);</span>
<span id="cb11-4"><a href="voltage-and-communication.html#cb11-4"></a>    delay(<span class="dv">1000</span>);</span></code></pre></div>
<p>But what did this do internally in the Teensy? When the Teensy gets the command <code>digitalWrite(13, HIGH);</code> it sets the voltage of pin 13 to 3.3 volts (3.3 V is standard voltage for microcontrollers). Alternatively, when it gets the command <code>digitalWrite(13, LOW);</code>, it sets the voltage to 0 V. Thus, when the voltage is 3.3 V, there is a potential difference across the LED from 3.3 V on the controlling pin (anode) to 0V on the ground pin (cathode). This causes current to flow through the LED, which in turn causes the LED to light up. When the voltage is set back to 0, there is no longer a potential difference across the LED, current does not flow, and the LED does not light up.</p>
<p>You may have gotten the idea that voltage and current are inextricably linked, and that’s true. In fact, <strong>Ohm’s Law</strong> provides a mathmatical relation between the two:</p>
<p><span class="math display">\[
\text{Voltage (volts)} = \text{Current (amps)} \times \text{Resistance (ohms, }\Omega\text{)}  \\
V = iR
\]</span></p>
<p>This introduces a new concept, resistance. <strong>Resistance</strong> is simply the opposition to flow of electrical current. Resistance can be introduced to a circuit purposely with a device called a <strong>resistor</strong>. Usually these are a defined, fixed resistance introduced for a specific purpose. However, many sensors have a resistance that changes proporitionally to some stimulus. Thus, the voltage across the device will change in response to that stimulus, and the stimulus can be measured simply by measuring the voltage. As an example of how useful this is, consider a temperature sensor. A computer or microcontroller cannot sense the temperature directly – it only understands voltages. A device that converts changes in temperature to changes in voltage allows the computer to infer changes in temperature.</p>
<p>Although the voltage output from the Teensy pin was either HIGH or LOW, the voltage output from the temperature sensor can be any value. A signal that can be only HIGH or LOW (i.e. on or off, 1 or 0), is called a <strong>digital signal</strong>. Digital signals are often used to communicate between computers and to control many devices because they are relatively immune to outside noise. Many sensors, on the other hand, produce signals that vary <em>continuously</em>, and such signals are called <strong>analog signals</strong>.</p>
<p>The Teensy can read <em>digital</em> signals on any of its digital I/O (input/output) pins (grey labels on the pinout diagram). The Teensy can read <em>analog</em> signals on any of the analog input pin, which are shown with orange labels in the pinout diagram and numbered A0 through A22 (the A stands for analog).</p>
</div>
<div id="bits-and-volts" class="section level3 unnumbered">
<h3>Bits and Volts</h3>
<p>Even though Teensy can “read” analog signals, it only understands digital signals. So every analog signal read by the Teensy gets sent through an <em>analog to digital converter</em> (ADC). This converts the analog signal from a sensor into a digital signal with discrete steps. The size of these steps is determined by the number of <strong>bits</strong> the ADC has. More bits equals more steps, and more steps equals a digital signal that more closely approximates the real analog signal.</p>
</div>
<div id="communicating-via-the-serial-port" class="section level3 unnumbered">
<h3>Communicating via the serial port</h3>
<p>In the previous exercise, you used digital signals to control an LED, but there was no communication between the Teensy and computer after the sketch was uploaded. When reading signals, it’s often useful to display the reading on the computer screen to have real-time feedback from the program. To do this, the data collected on the Teensy board must be sent to the computer, the computer must read the data, and the computer must display it on the screen. The communication protocol used to do this is called <strong>serial communication</strong>. This is a very widely used protocol, and most computers used to come with a serial port built in. In our case, we’ll conduct serial communication over the USB port.</p>
<p>Using serial communication on the Teensy is relatively simple. The first step is to open the serial port and tell it what data transfer speed to use (basically how quickly the Teensy and the computer talk to each other).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb12-1"><a href="voltage-and-communication.html#cb12-1"></a>    Serial.begin(<span class="dv">9600</span>);</span></code></pre></div>
<p>Once the connection is open, you can print most anything to the serial port you wish. For example, a simple <a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">hello world</a> program would look something like:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb13-1"><a href="voltage-and-communication.html#cb13-1"></a>    Serial.begin(<span class="dv">9600</span>);</span>
<span id="cb13-2"><a href="voltage-and-communication.html#cb13-2"></a>    Serial.print(<span class="st">&quot;Hello, World!&quot;</span>);</span></code></pre></div>
<p>The above pseudocode would print “Hello, World!” to the computer’s serial port. The result could be displayed on the computer screen by opening the serial monitor in the Arduino IDE. There are a few more details you’ll learn as you go.</p>
<p>In this exercise, you’ll measure ambient temperatures using a temperature sensor and display the result to the computer screen via the serial port.</p>
</div>
</div>
<div id="connect-the-temperature-sensor" class="section level2">
<h2><span class="header-section-number">3.1</span> Connect the Temperature Sensor</h2>
<ol style="list-style-type: decimal">
<li><p>Push your Teensy into the breadboard provided and connect the USB cable. Try not to bend the pins as you push it in. Refer to the diagram below if necessary.</p>
<blockquote>
<p>REMEMBER, BE <strong><em>EXTREMELY</em></strong> CAREFUL WITH THE USB CONNECTION ON THE TEENSY. THEY BREAK <strong><em>VERY</em></strong> EASILY!!</p>
</blockquote></li>
<li><p>Push the sensor into the breadboard such that neither of the leads (wires) are connected to anything else (each one is in it’s own row). The orientation does not matter; both legs are the same.</p>
<blockquote>
<p><em>Always work with the Teensy unplugged from the computer. This will help ensure no “magic smoke” escapes.</em></p>
</blockquote></li>
<li><p>Use a jumper wire to connect one side of the sensor to Vin/5V on the Teensy (side 1).</p></li>
<li><p>Connect the other side (side 2) of the sensor to a 10 kilo-ohm (k<span class="math inline">\(\Ohm\)</span>) resistor, and then connect the other side of the resistor to ground (GND on the Teensy). You may need to use a jumper wire to connect the resistor to GND.</p></li>
<li><p>Use a jumper wire to connect side 2 of the sensor to an analog input on the Teensy. In the example below, pin A0 is used.</p></li>
</ol>
<div class="figure">
<img src="images/breadboard_thermistor_teensy.png" alt="" />
<p class="caption"><small><em>Your final setup should look something like this picture. Red = 5V, black = GND, and blue = signal. </em></small></p>
</div>
</div>
<div id="program-the-teensy-1" class="section level2">
<h2><span class="header-section-number">3.2</span> Program the Teensy</h2>
<div id="bare-minimum" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Bare Minimum</h3>
<ol style="list-style-type: decimal">
<li><p>Open the Arduino IDE and load a new file (if one doesn’t open automatically).</p></li>
<li><p>Go to <code>File &gt; Save As</code> to save the example under a new name in the default location (<code>Documents/Arduino</code>). Call it <strong>groupName_voltage.ino</strong>.</p>
<blockquote>
<p><em>Remember, files that don’t follow the naming convention <strong>exactly</strong> will incur point deductions.</em></p>
</blockquote></li>
<li><p>Create a <code>setup()</code> function and start serial communication within it:</p></li>
</ol>
<div class="sourceCode" id="cb14"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb14-1"><a href="voltage-and-communication.html#cb14-1"></a>    <span class="dt">void</span> setup() {</span>
<span id="cb14-2"><a href="voltage-and-communication.html#cb14-2"></a>        Serial.begin(<span class="dv">9600</span>);  <span class="co">// start serial communication at a rate of 9600 bits per second (the standard)</span></span>
<span id="cb14-3"><a href="voltage-and-communication.html#cb14-3"></a>    }</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Create a <code>loop()</code> function, read the sensor data, and print it to the serial port:</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="voltage-and-communication.html#cb15-1"></a>    <span class="dt">void</span> loop() {</span>
<span id="cb15-2"><a href="voltage-and-communication.html#cb15-2"></a>        value = analogRead(<span class="dv">0</span>); <span class="co">// read sensor</span></span>
<span id="cb15-3"><a href="voltage-and-communication.html#cb15-3"></a>        Serial.println(value); <span class="co">// print result to serial port</span></span>
<span id="cb15-4"><a href="voltage-and-communication.html#cb15-4"></a>        delay(<span class="dv">1000</span>);           <span class="co">// wait for 1 second</span></span>
<span id="cb15-5"><a href="voltage-and-communication.html#cb15-5"></a>    }</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Press the <strong>Upload</strong> button to send your sketch to the Teensy. Once you get it loaded, click the <strong>Serial Monitor</strong> button to see if the communication is working. You should see a number between 400 and 500 if you sensor is working correctly.</li>
</ol>
</div>
<div id="converting-to-temperature" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Converting to Temperature</h3>
<p>The Teensy reports values in bits, which isn’t very meaningful to humans. What we really care about is the temperature. The formula to get from bits to degrees C (for this sensor connected to a Teensy) is:</p>
<pre><code>\[
    ^{\circ}C = 25 + (\text{value} - 512) / 11.3
\]</code></pre>
<ol style="list-style-type: decimal">
<li>Add the above forumla to your code to convert to temperature. Also change the code to print the temperature to the serial port instead of the raw value.</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb17-1"><a href="voltage-and-communication.html#cb17-1"></a>    <span class="dt">void</span> loop() {</span>
<span id="cb17-2"><a href="voltage-and-communication.html#cb17-2"></a>        value = analogRead(<span class="dv">0</span>); <span class="co">// read sensor</span></span>
<span id="cb17-3"><a href="voltage-and-communication.html#cb17-3"></a>        temp  = ____________________________; <span class="co">// convert to temperature</span></span>
<span id="cb17-4"><a href="voltage-and-communication.html#cb17-4"></a>        ______________________; <span class="co">// print the temperature to the serial port.</span></span>
<span id="cb17-5"><a href="voltage-and-communication.html#cb17-5"></a>        delay(<span class="dv">1000</span>);            <span class="co">// wait for 1 second</span></span>
<span id="cb17-6"><a href="voltage-and-communication.html#cb17-6"></a>    }</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Upload your code and see if it works.</li>
</ol>
</div>
<div id="cleaning-up-the-output" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Cleaning up the Output</h3>
<p>You can also print text to the serial port. When you use <code>Serial.print()</code> or <code>Serial.println()</code> to print text, it should always be in quote marks (this is technically called a <em>string</em>). For example, <code>Serial.println(Hello, world!)</code> would NOT work, but <code>Serial.println("Hello, world!")</code> would. To clean up you data output, try printing "*C" after the temperature to indicate the units.</p>
<ol style="list-style-type: decimal">
<li>Change <code>Serial.println(temp)</code> to <code>Serial.print(temp)</code>. These two functions are very similar, with one difference: <code>println</code> creates a new line when it’s finished (like pressing enter on the keyboard) whereas <code>print</code> does not.</li>
<li>Add a line just below <code>Serial.print(temp)</code> to print the "*C" symbology:</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb18-1"><a href="voltage-and-communication.html#cb18-1"></a>    Serial.print(temp);</span>
<span id="cb18-2"><a href="voltage-and-communication.html#cb18-2"></a>    Serial.println(<span class="st">&quot;*C&quot;</span>);</span></code></pre></div>
</div>
<div id="make-your-own-changes-1" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Make Your Own Changes</h3>
<ol style="list-style-type: decimal">
<li>Before you leave, add a line in your code to convert from degrees C to degrees F.</li>
<li>Once you’ve converted to F, print the results for both degrees C and degrees F. Your values should:
<ul>
<li>Be printed to the serial port <em>on the same line</em>.</li>
<li>Include the units “<em>C" and "</em>F” where needed.</li>
<li>Be separated from each other with a space (either " " or ‘’).</li>
</ul></li>
</ol>
</div>
<div id="turn-in-1" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Turn in</h3>
<ol style="list-style-type: decimal">
<li><p>A hardcopy of your completed Exercise 3 Worksheet.</p></li>
<li><p>An electronic copy of your final Voltage code (submit to Dropbox).</p>
<blockquote>
<p><em>Remember, files that don’t follow the naming convention <strong>exactly</strong> will incur point deductions.</em></p>
</blockquote></li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="blink-an-led.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions-building-blocks-for-programs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["chem191.github.io.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
