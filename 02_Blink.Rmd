# Blink an LED

**Objective:** Use Arduino to turn an LED on and off.
**To turn in:** You working Arduino code at the end of the exercise.

## Introduction {-}

This exercise will explore two concepts: (1) connecting devices to the Arduino and (2) the structure of the Arduino program used to control those devices.  As a first example, we'll connect an LED (light-emitting diode) to the Teensy and write a program to turn in on and off.

### How are things connected to a Teensy? {-}

The Teensy can control all sorts of devices, including lights, motors, and various sensors.  The device to be controlled must be connected to one of the Teensy's *pins*. You can think of a pin as a unique port on the Teensy.  Pins can send and receive information, so communication between the pin and the sensor goes both ways.  One pin might be used to control a light, while another might be used to read data from a temperature sensor.  The pins that are available on the Teensy are shown in the figure below.  Some pins provide power (3.3 V), some pins provide a connection to the circuit ground (GND), and some function to send and receive data.  Some pins may have several function, each represented by a different color rectangle next to the pin the figure below.    Note, though, that each pin can only have one function at any given time.  For now, we'll just focus on the pin numbers.  The labeled 0-33 (shown in grey) are called *digital pins*; they function as both inputs and outputs, but we'll use just the output functionality in this exercise.

There are several ways to connect something to the pins of the Teensy.  One way is to directly solder items to the pins of the Teensy, in which a soft metal alloy is melted onto two parts as they are connected to make a permanent, metal connection.  This is best saved for a final, fully vetted design that won't ever need to be changed.  For this exercise, we'll use another method, called a solderless breadboard.  A breadboard is shown in the figure below.  The holes in the breadboard are spaced in such a way that a Teensy can be plugged directly into the board.  Columns, labelled A, B, C, ..., are connected across the board electrically, such that A1 and B1 are connected; rows are insulated, such that A1 and A2 are not connected.  The connections labeled with red and blue lines on each edge are connected together and are sometimes called rails; they provide an easy way to distribute power and ground connections around the board.  If that seems confusing, try watching this video [this video](https://www.youtube.com/watch?v=mLOxoK1zj9A).

![<small>*A solderless breadboard.  Holes with the same number are connected electrically, except across the gap in the middle, while holes with different numbers are electrically insulated.  (image credit: [oomlout CC BY-SA 2.0, wikimedia.org](https://commons.wikimedia.org/wiki/File:400_points_breadboard.jpg))*</small>](https://upload.wikimedia.org/wikipedia/commons/7/73/400_points_breadboard.jpg)

### What is a program? {-}

A *program*, or *sketch* in Arduino jargon, is a set of commands stored on the Teensy that tell it what to do.  Although a Teensy can do most anything a computer would do, it can only run a single program over and over.  For example, this exercise will use a set of commands to program the Teensy to turn an LED on and off.  Other options would be to collect data from a temperature sensor, or turn a motor on a off to move a robot (or to do all of those things at once).

An Arduino program always consists of two parts: (1) a `setup()` function and (2) a `loop()` function.  The `setup()` function runs once every time the Teensy is powered on.  After that, the Teensy runs the `loop()` function over and over until it's turned off.  Often, some initial lines of code are included above the `setup()` function that define things used in the program.

In the exercise, we'll connect an 3-color LED to a teensy and write a sketch to control it.

## Connecting the LED

1. Push your Teensy into the breadboard provided and connect the USB cable.

> Remember, be ***EXTREMELY*** careful with the USB connection on the Teensy.  They break ***VERY*** easily!!

2. Push the LED into the breadboard such that none of the leads (wires) are connected to anything else (each one is in it's own row).  Make sure you note which row the longer lead goes into.

> Always work with the Teensy unplugged from the computer.  This will help ensure no magic smoke escapes.

3. Use a jumper wire to connect the **longer lead** to the **GND** pin on the Teensy.
1. Use 3 more jumper wires to connect the remaining three leads to pins **13, 14, and 15**.

## Program the Arduino

### One Color

1. Open the Arduino IDE and load the Blink example (`File > Examples > 0.1 Basic > Blink`)
1. Go to `File > Save As` to save the example under a new name in the default location (`Documents/Arduino`).  Call it **lastnameFirstname_blink.ino**.

  > Remember, files that don't follow the naming convention *exactly* will incur point deductions.

3. You should see the following at the top of the sketch:

```{Rcpp, eval = FALSE}
    // Pin 13 has the LED on Teensy 3.0
    // give it a name:
    int led = 13;
```

  Anything following a `//` is a comment; it does not affect the Arduino program.  Please get in the habit of using comments to describe what each line of code does.
  
  The line `int led = 13` defines the name of pin 13 as `led`.  This name could be anything you wish.  In this case, led is useful because the LED is connected to pin 13.

4. Next is the `setup()` function.  In this case, the only setup necessary is to set the mode of the `led` pin as an output.

```{Rcpp, eval = FALSE}
  // the setup routine runs once when you press reset:
  void setup() {                
    // initialize the digital pin as an output.
    pinMode(led, OUTPUT);     
  }
```

5. Finally, the `loop()` function, which runs over and over.
```{Rcpp, eval = FALSE}
  digitalWrite(led, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);               // wait for a second
  digitalWrite(led, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);               // wait for a second
```

6. Assuming all those sections look good, press the **Upload** button (right arrow in top left).

### Three Colors

You should have seen a single color blinking on and off.  We really want all three to go on and off.  Let's make some modifications to the code so that will happen.

1. Define the two extra pins.  In this case, it could be useful to refer to them by color.

```{Rcpp, eval = FALSE}
    int blue = 13;   // blue pin connected to pin 13
    int green = 14;  // green pin connected to pin 14
    int red = 15;    // red pin connected to pin 15
```

2. Set each of those to outputs in the `setup()` function.  You will have to fill in the blanks for the red and green pins below.
```{Rcpp, eval = FALSE}
  // the setup routine runs once when you press reset:
  void setup() {                
    pinMode(blue, OUTPUT);     // initialize the blue pin as an output.
    pinMode(____, OUTPUT);     // initialize the green pin as an output.
    ______________________     // initialize the red pin as an output.
  }
```

3. Finally, add the extra colors to the `loop()` function.

```{Rcpp, eval = FALSE}
  // blue
  digitalWrite(blue, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);                // wait for a second
  digitalWrite(blue, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);                // wait for a second
  
  // green
  digitalWrite(green, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);                 // wait for a second
  digitalWrite(green, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);                 // wait for a second
  
  // red
  digitalWrite(red, HIGH);     // turn the LED on (HIGH is the voltage level)
  delay(1000);                 // wait for a second
  digitalWrite(red, LOW);      // turn the LED off by making the voltage LOW
  delay(1000);                 // wait for a second
```

4. Make sure you show your code and blinking LED to your instructor before you move on.

### Make Your Own Changes

1. Before you leave, modify your code to change the blink pattern.  You can change the sequence of the colors, the time between blinks, the number of blinks, or the amount of time each color is on.
1. Save your final code and turn it in to Dropbox.